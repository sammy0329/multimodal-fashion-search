# AI ì½”ë”” ì¶”ì²œ ëª¨ë‹¬ (ì‡¼í•‘ëª° ìŠ¤íƒ€ì¼)

## ì™€ì´ì–´í”„ë ˆì„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                    [Ã—]   â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  âœ¨ AI ìŠ¤íƒ€ì¼ë¦¬ìŠ¤íŠ¸ ì¶”ì²œ                                 â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  ì„ íƒí•˜ì‹  ì•„ì´í…œ                                         â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚   â”‚
â”‚  â”‚  â”‚          â”‚ â”‚          â”‚                              â”‚   â”‚
â”‚  â”‚  â”‚   img    â”‚ â”‚   img    â”‚                              â”‚   â”‚
â”‚  â”‚  â”‚          â”‚ â”‚          â”‚                              â”‚   â”‚
â”‚  â”‚  â”‚ ë¸Œëœë“œA  â”‚ â”‚ ë¸Œëœë“œB  â”‚                              â”‚   â”‚
â”‚  â”‚  â”‚ ì…”ì¸ ëª…   â”‚ â”‚ ì…”ì¸ ëª…   â”‚                              â”‚   â”‚
â”‚  â”‚  â”‚ â‚©45,000  â”‚ â”‚ â‚©38,000  â”‚                              â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ ğŸ’¬                                                 â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                                    â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ í™”ì´íŠ¸ ì˜¤ë²„í• ì…”ì¸ ë¥¼ ì„ íƒí•˜ì…¨ë„¤ìš”!                 â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                                    â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ ì´ëŸ° ìŠ¤íƒ€ì¼ì€ í¸ì•ˆí•˜ë©´ì„œë„ íŠ¸ë Œë””í•œ ë¬´ë“œë¥¼         â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ ì—°ì¶œí•  ìˆ˜ ìˆì–´ìš”. ì™€ì´ë“œ ë°ë‹˜ì´ë‚˜ ìŠ¬ë™ìŠ¤ì™€         â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ ë§¤ì¹˜í•˜ë©´ ì™„ë²½í•œ ìºì£¼ì–¼ë£© ì™„ì„±!â–Œ                    â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                                    â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  ğŸ’¡ í•¨ê»˜ ë§¤ì¹˜í•˜ë©´ ì¢‹ì•„ìš”                                â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚   â”‚
â”‚  â”‚  â”‚          â”‚ â”‚          â”‚ â”‚    ğŸ‘–    â”‚                â”‚   â”‚
â”‚  â”‚  â”‚   img    â”‚ â”‚   img    â”‚ â”‚          â”‚                â”‚   â”‚
â”‚  â”‚  â”‚          â”‚ â”‚          â”‚ â”‚  ìŠ¬ë™ìŠ¤  â”‚ â† ì—†ìœ¼ë©´ íƒœê·¸  â”‚   â”‚
â”‚  â”‚  â”‚ ì™€ì´ë“œ   â”‚ â”‚ ì¹´í‚¤     â”‚ â”‚  (ì¶”ì²œ)  â”‚                â”‚   â”‚
â”‚  â”‚  â”‚ ë°ë‹˜     â”‚ â”‚ ì¹˜ë…¸     â”‚ â”‚          â”‚                â”‚   â”‚
â”‚  â”‚  â”‚ â‚©38,000  â”‚ â”‚ â‚©45,000  â”‚ â”‚          â”‚                â”‚   â”‚
â”‚  â”‚  â”‚ [ë‹´ê¸°]   â”‚ â”‚ [ë‹´ê¸°]   â”‚ â”‚          â”‚                â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚         [ ğŸ”„ ë‹¤ë¥¸ ì¶”ì²œ ]    [ ì‡¼í•‘ ê³„ì†í•˜ê¸° ]           â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Tailwind êµ¬í˜„

```tsx
// components/recommend/AIRecommendModal.tsx
interface AIRecommendModalProps {
  isOpen: boolean;
  onClose: () => void;
  selectedProducts: ProductResult[];
  userQuery?: string;
}

export function AIRecommendModal({
  isOpen,
  onClose,
  selectedProducts,
  userQuery
}: AIRecommendModalProps) {
  const {
    comment,
    isStreaming,
    matchingProducts,
    styleTags,
    recommend
  } = useRecommend();

  useEffect(() => {
    if (isOpen && selectedProducts.length > 0) {
      recommend(selectedProducts.map(p => p.product_id), userQuery);
    }
  }, [isOpen]);

  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
      {/* ë°±ë“œë¡­ */}
      <div
        className="absolute inset-0 bg-black/60 backdrop-blur-sm"
        onClick={onClose}
      />

      {/* ëª¨ë‹¬ */}
      <div className="relative w-full max-w-2xl max-h-[85vh] bg-white rounded-2xl shadow-2xl overflow-hidden animate-fadeIn">
        {/* í—¤ë” */}
        <div className="flex items-center justify-between px-6 py-4 border-b border-gray-100">
          <h2 className="text-lg font-bold text-gray-900">
            âœ¨ AI ìŠ¤íƒ€ì¼ë¦¬ìŠ¤íŠ¸ ì¶”ì²œ
          </h2>
          <button
            onClick={onClose}
            className="w-10 h-10 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors"
          >
            <span className="text-xl">Ã—</span>
          </button>
        </div>

        {/* ìŠ¤í¬ë¡¤ ì˜ì—­ */}
        <div className="overflow-y-auto max-h-[calc(85vh-140px)] p-6">
          {/* ì„ íƒí•œ ì•„ì´í…œ */}
          <div className="mb-6">
            <h3 className="text-sm font-medium text-gray-500 mb-3">
              ì„ íƒí•˜ì‹  ì•„ì´í…œ
            </h3>
            <div className="flex gap-4 overflow-x-auto pb-2">
              {selectedProducts.map((product) => (
                <div key={product.product_id} className="flex-shrink-0 w-32">
                  <div className="aspect-[3/4] rounded-lg overflow-hidden bg-gray-100 mb-2">
                    <img
                      src={product.image_url}
                      alt={product.name}
                      className="w-full h-full object-cover"
                    />
                  </div>
                  <p className="text-xs text-gray-500">{product.brand}</p>
                  <p className="text-sm text-gray-900 truncate">
                    {product.name_ko || product.name}
                  </p>
                  <p className="text-sm font-bold text-gray-900">
                    â‚©{product.price.toLocaleString()}
                  </p>
                </div>
              ))}
            </div>
          </div>

          <hr className="border-gray-100 mb-6" />

          {/* AI ì½”ë©˜íŠ¸ */}
          <div className="bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl p-5 mb-6">
            <div className="flex gap-3">
              <span className="text-2xl">ğŸ’¬</span>
              <div className="flex-1">
                {isStreaming && !comment ? (
                  <div className="flex items-center gap-2 text-gray-500">
                    <div className="w-2 h-2 bg-indigo-500 rounded-full animate-bounce" />
                    <div className="w-2 h-2 bg-indigo-500 rounded-full animate-bounce" style={{ animationDelay: '0.1s' }} />
                    <div className="w-2 h-2 bg-indigo-500 rounded-full animate-bounce" style={{ animationDelay: '0.2s' }} />
                    <span className="ml-2">ë¶„ì„ ì¤‘...</span>
                  </div>
                ) : (
                  <p className="text-gray-800 leading-relaxed whitespace-pre-wrap">
                    {comment}
                    {isStreaming && (
                      <span className="inline-block w-0.5 h-5 bg-indigo-600 ml-0.5 animate-pulse" />
                    )}
                  </p>
                )}
              </div>
            </div>
          </div>

          <hr className="border-gray-100 mb-6" />

          {/* ë§¤ì¹­ ì•„ì´í…œ */}
          <div>
            <h3 className="text-sm font-medium text-gray-500 mb-4">
              ğŸ’¡ í•¨ê»˜ ë§¤ì¹˜í•˜ë©´ ì¢‹ì•„ìš”
            </h3>
            <div className="grid grid-cols-3 gap-4">
              {/* DBì—ì„œ ì°¾ì€ ìƒí’ˆ */}
              {matchingProducts.map((product) => (
                <div key={product.product_id} className="group">
                  <div className="aspect-[3/4] rounded-lg overflow-hidden bg-gray-100 mb-2 relative">
                    <img
                      src={product.image_url}
                      alt={product.name}
                      className="w-full h-full object-cover group-hover:scale-105 transition-transform"
                    />
                    {/* í˜¸ë²„ ì‹œ ë‹´ê¸° ë²„íŠ¼ */}
                    <div className="absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-colors flex items-center justify-center">
                      <button className="opacity-0 group-hover:opacity-100 px-4 py-2 bg-white rounded-lg text-sm font-medium text-gray-900 transition-opacity">
                        ë‹´ê¸°
                      </button>
                    </div>
                  </div>
                  <p className="text-xs text-gray-500">{product.brand}</p>
                  <p className="text-sm text-gray-900 truncate">
                    {product.name_ko || product.name}
                  </p>
                  <p className="text-sm font-bold text-gray-900">
                    â‚©{product.price.toLocaleString()}
                  </p>
                </div>
              ))}

              {/* ìŠ¤íƒ€ì¼ íƒœê·¸ (ìƒí’ˆ ì—†ì„ ë•Œ) */}
              {styleTags.map((tag, i) => (
                <div
                  key={i}
                  className="aspect-[3/4] rounded-lg bg-gray-50 border-2 border-dashed border-gray-200 flex flex-col items-center justify-center"
                >
                  <span className="text-4xl mb-2">{getStyleEmoji(tag)}</span>
                  <span className="text-sm text-gray-600 font-medium">{tag}</span>
                  <span className="text-xs text-gray-400">(ì¶”ì²œ ìŠ¤íƒ€ì¼)</span>
                </div>
              ))}
            </div>
          </div>
        </div>

        {/* í‘¸í„° ë²„íŠ¼ */}
        <div className="px-6 py-4 border-t border-gray-100 bg-gray-50 flex gap-3">
          <button
            onClick={() => recommend(selectedProducts.map(p => p.product_id), userQuery)}
            disabled={isStreaming}
            className="flex-1 py-3 border border-gray-300 rounded-xl text-gray-700 font-medium hover:bg-white disabled:opacity-50 transition-colors"
          >
            ğŸ”„ ë‹¤ë¥¸ ì¶”ì²œ
          </button>
          <button
            onClick={onClose}
            className="flex-1 py-3 bg-indigo-600 text-white font-medium rounded-xl hover:bg-indigo-700 transition-colors"
          >
            ì‡¼í•‘ ê³„ì†í•˜ê¸°
          </button>
        </div>
      </div>
    </div>
  );
}

function getStyleEmoji(style: string): string {
  const map: Record<string, string> = {
    'ë°ë‹˜': 'ğŸ‘–',
    'ìŠ¬ë™ìŠ¤': 'ğŸ‘”',
    'ìŠ¤ë‹ˆì»¤ì¦ˆ': 'ğŸ‘Ÿ',
    'ë¡œí¼': 'ğŸ¥¿',
    'ê°€ë°©': 'ğŸ‘œ',
    'ëª¨ì': 'ğŸ§¢',
    'ë²¨íŠ¸': 'ğŸª¢',
  };
  return map[style] || 'âœ¨';
}
```

---

## ì• ë‹ˆë©”ì´ì…˜

```tsx
// tailwind.config.jsì— ì¶”ê°€
module.exports = {
  theme: {
    extend: {
      animation: {
        'fadeIn': 'fadeIn 0.2s ease-out',
        'slideUp': 'slideUp 0.3s ease-out',
      },
      keyframes: {
        fadeIn: {
          '0%': { opacity: '0', transform: 'scale(0.95)' },
          '100%': { opacity: '1', transform: 'scale(1)' },
        },
        slideUp: {
          '0%': { opacity: '0', transform: 'translateY(20px)' },
          '100%': { opacity: '1', transform: 'translateY(0)' },
        },
      },
    },
  },
}
```

---

## useRecommend í›…

```tsx
// hooks/useRecommend.ts
interface RecommendResult {
  comment: string;
  isStreaming: boolean;
  matchingProducts: ProductResult[];
  styleTags: string[];
  recommend: (productIds: string[], userQuery?: string) => Promise<void>;
}

export function useRecommend(): RecommendResult {
  const [comment, setComment] = useState('');
  const [isStreaming, setIsStreaming] = useState(false);
  const [matchingProducts, setMatchingProducts] = useState<ProductResult[]>([]);
  const [styleTags, setStyleTags] = useState<string[]>([]);

  const recommend = async (productIds: string[], userQuery?: string) => {
    setIsStreaming(true);
    setComment('');
    setMatchingProducts([]);
    setStyleTags([]);

    try {
      const res = await fetch(`${API_URL}/api/v1/recommend?stream=true`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ product_ids: productIds, user_query: userQuery }),
      });

      const reader = res.body?.getReader();
      const decoder = new TextDecoder();

      while (true) {
        const { done, value } = await reader!.read();
        if (done) break;

        const chunk = decoder.decode(value);
        const lines = chunk.split('\n');

        for (const line of lines) {
          if (!line.startsWith('data: ')) continue;

          const event = JSON.parse(line.slice(6));

          switch (event.event) {
            case 'delta':
              setComment(prev => prev + event.data);
              break;
            case 'matching':
              setMatchingProducts(prev => [...prev, event.data]);
              break;
            case 'style_tag':
              setStyleTags(prev => [...prev, event.data]);
              break;
            case 'done':
              setIsStreaming(false);
              break;
          }
        }
      }
    } catch (error) {
      console.error('ì¶”ì²œ ì‹¤íŒ¨:', error);
      setIsStreaming(false);
    }
  };

  return { comment, isStreaming, matchingProducts, styleTags, recommend };
}
```

---

## ìƒíƒœë³„ UI

| ìƒíƒœ | í‘œì‹œ |
|------|------|
| ì´ˆê¸° ë¡œë”© | ì  3ê°œ ì• ë‹ˆë©”ì´ì…˜ + "ë¶„ì„ ì¤‘..." |
| ìŠ¤íŠ¸ë¦¬ë° ì¤‘ | í…ìŠ¤íŠ¸ + ê¹œë¹¡ì´ëŠ” ì»¤ì„œ |
| ì™„ë£Œ | ì „ì²´ ì½”ë©˜íŠ¸ + ë§¤ì¹­ ì•„ì´í…œ |
| ì—ëŸ¬ | ì—ëŸ¬ ë©”ì‹œì§€ + ì¬ì‹œë„ ë²„íŠ¼ |
